import javax.management.MBeanServerConnection;
import javax.management.ObjectName;
import javax.management.remote.JMXConnector;
import javax.management.remote.JMXConnectorFactory;
import javax.management.remote.JMXServiceURL;

public class TomcatThreadCount {

    public static void main(String[] args) throws Exception {
        String jmxUrl = "service:jmx:rmi:///jndi/rmi://nhnaunxlpdmp044:12345/jmxrmi";
        JMXServiceURL url = new JMXServiceURL(jmxUrl);
        JMXConnector jmxConnector = JMXConnectorFactory.connect(url);
        MBeanServerConnection mbeanServerConnection = jmxConnector.getMBeanServerConnection();

        ObjectName threadPoolMBean = new ObjectName("Catalina:type=ThreadPool,name=\"http-nio-8070\"");
        Integer threadCount = (Integer) mbeanServerConnection.getAttribute(threadPoolMBean, "currentThreadCount");

        System.out.println("Current Thread Count: " + threadCount);

        jmxConnector.close();
    }
}
